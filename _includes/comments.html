<div class="clearfix container-fluid page-comments">
  <section class="col12" id="static-comments">
    {% if site.repository and site.staticman.branch %}
      <!-- Start static comments -->
      <div class="js-comments">
        {% if site.data.comments[page.slug] %}
          <h4 class="page-comments-title">Comments</h4>
          {%- assign comments = site.data.comments[page.slug] | sort -%}
          {% for comment in comments %}
            {% assign email = comment[1].email %}
            {% assign name = comment[1].name %}
            {% assign url = comment[1].url %}
            {% assign date = comment[1].date %}
            {% assign message = comment[1].message %}
            {% include comment.html index=forloop.index email=email name=name url=url date=date message=message %}
          {% endfor %}
        {% endif %}
      </div>
      <!-- End static comments -->

      <!-- Start new comment form -->
      <div class="container-fluid page-comments-form">
        <h4 class="page-comments-title">Leave a Comment</h4>
        <p class="small">Your email address will not be published. Required fields are marked<span class="required">*</span></p>
        {%if jekyll.environment == 'production'%}
          {%capture staticman_url%} {{site.staticman.endpoint | default: 'https://api.staticman.net/v2/entry/'}}{{ site.repository }}/{{ site.staticman.branch}}{%endcapture staticman_url%}
        {%else%}
        {%capture staticman_url%} {{site.staticman.endpoint |default: 'http://localhost:8080/v2/entry/'}}{{ site.repository }}/{{ site.staticman.branch}}{%endcapture staticman_url%}
        {%endif%}
        <form id="new_comment" class="page-comments-form js-form form" method="post" action="{{staticman_url}}/comments">
          <div class="row">
            <div class="col-1">
              <div class="form-spinner"><i class="fas fa-spinner fa-spin fa-3x fa-fw"><span class="sr-only">Loading...</span></i></div>
            </div>
            <div class="col-5">
              <div class="form-group">
              <label for="comment-form-name">Name/Pseudo<small class="required">*</small></label>
              <div class="input-group">
               <div class="input-group-prepend"><span class="input-group-text" id="comment-form-name-p"><i class="fas fa-user-check"></i><span class="sr-only">@</span></span></div>
              <input class="form-control" type="text" id="comment-form-name" name="fields[name]" tabindex="2" aria-describedby="comment-form-name-p"/>
              </div>
              </div>
              <div class="form-group">
              <label for="comment-form-email">Email address<small class="required">*</small></label>
              <div class="input-group">
               <div class="input-group-prepend"><span class="input-group-text" id="comment-form-email-p"><i class="fas fa-at"></i><span class="sr-only">@</span></span></div>
              <input class="form-control" type="email" id="comment-form-email" name="fields[email]" tabindex="3" aria-describedby="comment-form-email-p"/>
              </div>
              </div>
              <div class="form-group">
              <label for="comment-form-url">Website (optional)</label>
              <div class="input-group">
              <div class="input-group-prepend"><span class="input-group-text" id="comment-form-url-p"><i class="fas fa-globe"></i><span class="sr-only">https://</span></span></div>
              <input class="form-control" type="url" id="comment-form-url" name="fields[url]" tabindex="4" aria-describedby="comment-form-url-p" placeholder="https://"/>
              </div>
            </div>
            <div class="form-group hidden" style="display: none;">
              <input class="form-control" type="hidden" name="options[slug]" value="{{ page.slug }}">
              <label for="comment-form-location">Not used. Leave blank if you are a human.</label>
              <input class="form-control" type="text" id="comment-form-location" name="fields[hidden]" autocomplete="off"/>
            </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label for="comment-form-message"><i class="fas fa-comment"></i> Comment<small class="required">*</small></label>
                <textarea class="form-control" type="text" rows="6" id="comment-form-message" name="fields[message]" tabindex="1"></textarea>
                <div class="small help-block"><a href="https://daringfireball.net/projects/markdown/">Markdown is supported.</a></div>
                <div class="sticky-bottom">
                <button type="submit" id="comment-form-submit" tabindex="5" class="btn btn-primary">Submit Comment</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Start comment form alert messaging -->
          <p class="hidden js-notice">
            <strong class="js-notice-text"></strong>
          </p>
          <!-- End comment form alert messaging -->
        </form>
      </div>
      <!-- End new comment form -->
      {% if site.reCaptcha.siteKey %}<script async src="https://www.google.com/recaptcha/api.js"></script>{% endif %}
    {% endif %}
  </section>
</div>
